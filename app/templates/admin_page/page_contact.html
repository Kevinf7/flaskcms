{% extends "shared/base_main.html" %}
{% from 'shared/macros/_version.html' import version with context %}
{% block title %}Page Contact{% endblock %}

{% block app_content %}
<div id="this-block">
  <form ref="form" method="post" action="{{ url_for('admin_page.page_contact') }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    <input type="hidden" name="id" value="{{ edit_ver.id }}">
    <input type="hidden" name="action" :value="action">

    {% include 'shared/macros/_page_edit_buttons.html' %}

    <textarea name="content" id="page">
      {{ edit_ver.content }}
    </textarea>
    <p v-if="errorMsg[0]" class="help is-danger">[[ errorMsg[0] ]]</p>
  </form>

  {{ version(edit_ver.page.name) }}
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
  new Vue({
    el: '#this-block',
    delimiters: ['[[', ']]'],
    data() {
      return {
        errorMsg: [''],
        action: '',
      }
    },
    methods: {
      hasError() {
        err = false
        for(let i=0; i<this.errorMsg.length; i++) {
          if(this.errorMsg[i] != '') err = true
        }
        return err
      },
      doValidate(evt) {
        if (evt.target.value != "Delete") {
        }
        this.action = evt.target.value
        this.$nextTick(() => {
          this.$refs.form.submit()
        })
      }
    }
  })
</script>
{% include 'shared/tinymce/_tinymce_page.html' %}
{% endblock %}

{% extends "admin_main/base.html" %}
{% block title %}Blog{% endblock %}

{% block app_content %}
<table class="table is-narrow is-fullwidth">
  <thead>
    <tr>
      <th>First publish</th>
      <th>Last update</th>
      <th>Last update by</th>
      <th>Title</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  {% for p in posts.items %}
    <tr>
      <td>{{ moment(p.create_date).format('D MMM YYYY hh:mm') }}</td>
      <td>{{ moment(p.update_date).format('D MMM YYYY hh:mm') }}</td>
      <td>{{ p.author.email }}</td>
      <td>{{ p.title }}</td>
      <td class="has-text-right"><a href="{{ url_for('admin_page.page_home') }}"><i class="far fa-edit"></i></a></td>
    </tr>
  {% endfor %}
  </tbody>
</table>

{% if posts.pages > 1 %}
<div class="section">
  <div class="container">
    <nav class="pagination" role="navigation" aria-label="pagination">
      {% if posts.has_prev%}
        <a class="pagination-previous" href="{{ url_for('admin_page.page', page=posts.prev_num) }}">Previous</a>
      {% else %}
        <a class="pagination-previous" disabled>Previous</a>
      {% endif %}
      {% if posts.has_next %}
        <a class="pagination-next" href="{{ url_for('admin_page.page', page=posts.next_num) }}">Next Page</a>
      {% else %}
        <a class="pagination-next" disabled>Next Page</a>
      {% endif %}
      <ul class="pagination-list">
      {% for page_num in pagess.iter_pages(left_edge=1, left_current=3, right_current=3, right_edge=1) %}
        {% if page_num %}
          {% if page_num != page.page %}
            <li>
              <a class="pagination-link" aria-label="Goto page {{ page_num }}" href="{{ url_for('admin_page.page', page=page_num) }}">{{ page_num }}</a>
            </li>
          {% else %}
            <li class="pagination-link is-current" aria-label="Page {{ page_num }}" aria-current="page">{{ page_num }}</li>
          {% endif %}
        {% else %}
          <span class="pagination-ellipsis">&hellip;</span>
        {% endif %}
      {% endfor %}
      </ul>
    </nav>
  </div>
</div>
{% endif %}
{% endblock %}
